---
import type { FeedItem } from "$utils/types";

type Props = FeedItem;

const { title, summary, author, url, published_at } = Astro.props;
const publishedDate = new Date(published_at);
const dateStr = publishedDate.toLocaleDateString("en-US", { year: "numeric", month: "short", day: "numeric" });
const content = title || summary || "Untitled";
---

<article class="bsky-card" data-card>
  <div class="bsky-content">
    <p>{content}</p>
    {
      author && (
        <a href={`https://bsky.app/profile/${author}`} target="_blank" rel="noopener noreferrer" class="author">
          @{author}
        </a>
      )
    }
  </div>
  <footer class="bsky-footer">
    <time datetime={published_at} class="bsky-time">{dateStr}</time>
    <a href={url} target="_blank" rel="noopener noreferrer">View post â†’</a>
  </footer>
</article>

<style>
  @reference "../styles/global.css";

  .bsky-time {
    @apply text-base;
  }

  .bsky-card {
    @apply my-4;
  }

  .bsky-content {
    @apply mb-2;
  }

  .bsky-content p {
    @apply mb-2 text-fg text-base p-0;
  }

  .author {
    @apply text-cyan text-base p-4;
  }

  .bsky-footer {
    @apply flex justify-between items-center gap-4 p-4 border-t border-dotted border-line text-base;
  }

  .bsky-footer time {
    @apply text-muted;
  }

  .bsky-footer a {
    @apply text-cyan hover:underline;
  }
</style>
